{% extends 'base.html.twig' %}
{% block title %}QB {{ 'Home'|trans }}{% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{{ asset('css/homepage.css') }}">
{% endblock %}
{% block content %}
{#            <div>{{ knp_pagination_sortable(pagination, 'Quiz name', 'b.name') }}</div>#}
{#            <div>{{ knp_pagination_sortable(pagination, 'Date of creation', 'b.dateOfCreation') }}</div>#}

{#    {{ dump(quizLeaders) }}#}
{#    {{ dump(pagination) }}#}

{#    {% for leader in quizLeaders %}#}
{#        {% if leader|length > 0 %}#}
{#            {{ dump(leader|first.userRelation.email) }}#}
{#        {% endif %}#}
{#    {% endfor %}#}

    <h1 class="font-weight-normal">Let`s play Quiz!</h1>
    <hr>
    <div class = "grid">
        {% for quiz in pagination %}
            <div class="quiz">
                <div class="quiz-content">

                    <h5>{{ quiz.name }}</h5>
                    <p>{{ quiz.Description }}</p>
{#                    <div class="gridin">#}
{#                        <a href="{{ path('edit_quiz', {'id': quiz.id }) }}">Update</a>#}
{#                    </div>#}

                    <div class="append">
                        <div>
                            <small>Quiz status: </small>
                            {% if quiz.isActive == 1 %}
                                <span class="badge badge-primary">Active</span>
                            {% else %}
                                <span class="badge badge-danger">Closed</span>
                            {% endif %}
                            <br>
                            <small>Started {{ quiz.dateOfCreation|date("d.m.Y") }}</small>
                        </div>
                        <div>
                            <small>
                                {% if quizLeaders[quiz.id]|length > 0 %}
                                    Leader: {{ quizLeaders[quiz.id]|first.userRelation.email }}
                                    <br>
                                    with {{ quizLeaders[quiz.id]|first.correctAnswers }} correct answers
                                {% endif %}
                            </small>
                        </div>
                    </div>

                </div>

                <div class="start">
                    {% if quiz.isActive == 1 %}
                        {# TODO set action path to correct route #}
                        <form action="{{ path('play_quiz', {'quizID': quiz.id }) }}">
                            <button type="submit" class="btn btn-primary">Let`s GO!</button>
                        </form>
                    {% else %}
                    <h5 class="font-weight-normal">
                        Closed
                    </h5>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>


    <hr>
    <div class="navigation text-center" id="navigationMenu">
        {{ knp_pagination_render(pagination) }}
    </div>

{#        <a href="{{ path('add_quiz') }}"> Create a new quiz</a>#}
{% endblock %}
